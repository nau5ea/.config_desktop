# KVIrc configuration file
[optionctrlr]
BigIcon=kvi_bigicon_settings.png
Code=#################################################################%0a#%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20#%0a#%20%20%20File%20:%20actions.kvs%20(optionctrlr)%20v4.1.1.7125%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20#%0a#%20%20%20Creation%20date%20:%20Fri%20Jul%2022%2016:57:41%202016%20UTC%20by%20un1versal%20%20%20#%0a#%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20#%0a#################################################################%0a%0a#%20Prevent%20dialog%20from%20opening%20multiple%20times%0aif(%25PDisplay)%0a%09halt;%0aelse%0a%09%25PDisplay%20=%20$true;%0a%0a#%20This%20prologue%20houses%20the%20variables%20for%20the%20option%20controller%20dialog%0a#%20Add%20CTCP%20Protection%20Variables%0a%25ProtectPing%20=%20$option(boolIgnoreCTCPPing)%0a%25ProtectFinger%20=%20$option(boolIgnoreCTCPFinger)%0a%25ProtectVersion%20=%20$option(boolIgnoreCTCPVersion)%0a%25ProtectUserinfo%20=%20$option(boolIgnoreCTCPUserinfo)%0a%25ProtectClientinfo%20=%20$option(boolIgnoreCTCPClientinfo)%0a%25ProtectSource%20=%20$option(boolIgnoreCTCPSource)%0a%25ProtectTime%20=%20$option(boolIgnoreCTCPTime)%0a%25ProtectPage%20=%20$option(boolIgnoreCTCPPage)%0a%25ProtectAvatar%20=%20$option(boolIgnoreCTCPAvatar)%0a%25ProtectDCC%20=%20$option(boolIgnoreCTCPDCC)%0a%0a#%20Add%20Join%20Suppression%20Variables%0a%25IsJoinEnabled%20=%20$isEventEnabled(OnJoin,%20suppressJoinMsgs)%0a%25IsPartEnabled%20=%20$isEventEnabled(OnPart,%20suppressPartMsgs)%0a%25IsQuitEnabled%20=%20$isEventEnabled(OnQuit,%20suppressQuitMsgs)%0a%0a#%20Create%20the%20main%20widget%20as%20a%20dialog%0a%25widget%20=%20$new(dialog)%0a%25layout%20=%20$new(layout,%25widget)%0a%25widget->$setWindowTitle($tr("Global%20Option%20Controllers%20-%20KVIrc"))%0a%0a#%20Add%20dialog%20geometry%20restrictions.%0a#%20Prevent%20dialog%20from%20looking%20nasty%20when%20resized!%0a#%20Maximum%20width%20accounts%20for%20translations%0a%25widget->$setWFlags(dialog)%0a#%20Make%20sure%20dialog%20is%20ontop%20and%20can%20be%20navigated%20by%20keyboard%0a%25widget->$raise()%0a%25widget->$setfocus()%0a%0a#%20Create%20the%20CTCP%20controlled%20groupbox%0a%25groupbox%20=%20$new(groupbox,%25widget)%0a%25groupbox->$setTitle($tr("CTCP%20Ignore%20Controllers"))%0a%25groupbox->$setAlignment("left")%0a%0a#%20Add%20groupbox%20to%20main%20layout%0a%25layout->$addWidget(%25groupbox,0,0)%0a%0a#%20Create%20checkboxes%20+%20labels%0a%25vbox%20=%20$new(vbox,%25groupbox)%0a%0a%25checkboxping%20=%20$new(checkbox,%25vbox)%0a%25checkboxping->$setText($tr("Enable%20ignore%20for%20CTCP%20PING"))%0a%25checkboxping->$setToolTip($tr("When%20checked,%20all%20CTCP%20PING%20requests%20are%20ignored."))%0a%25checkboxping->$setchecked(%25ProtectPing)%0a%0a#%20Here%20comes%20the%20magic%0aprivateimpl(%25checkboxping,checkbox)%0a{%0a%09if(%25ProtectPing)%0a%09{%0a%09%09option%20boolIgnoreCTCPPing%200%0a%09%09echo%20-i%20=%20$msgtype(GenericStatus)%20$tr("Disabled%20ignore%20for%20CTCP%20PING")%0a%09}%0a%09else%0a%09{%0a%09%09option%20boolIgnoreCTCPPing%201%0a%09%09echo%20-i%20=%20$msgtype(GenericStatus)%20$tr("Enabled%20ignore%20for%20CTCP%20PING")%0a%09}%0a%09%25ProtectPing%20=%20$option(boolIgnoreCTCPPing)%0a}%0aobjects.connect%20%25checkboxping%20clicked%20%25checkboxping%20checkbox%0a%0a%25checkboxfinger%20=%20$new(checkbox,%25vbox)%0a%25checkboxfinger->$setText($tr("Enable%20ignore%20for%20CTCP%20FINGER"))%0a%25checkboxfinger->$setToolTip($tr("When%20checked,%20all%20CTCP%20FINGER%20requests%20are%20ignored."))%0a%25checkboxfinger->$setchecked(%25ProtectFinger)%0a%0a#%20Here%20comes%20the%20magic%0aprivateimpl(%25checkboxfinger,checkbox)%0a{%0a%09if(%25ProtectFinger)%0a%09{%0a%09%09option%20boolIgnoreCTCPFinger%200%0a%09%09echo%20-i%20=%20$msgtype(GenericStatus)%20$tr("Disabled%20ignore%20for%20CTCP%20FINGER")%0a%09}%0a%09else%0a%09{%0a%09%09option%20boolIgnoreCTCPFinger%201%0a%09%09echo%20-i%20=%20$msgtype(GenericStatus)%20$tr("Enabled%20ignore%20for%20CTCP%20FINGER")%0a%09}%0a%09%25ProtectFinger%20=%20$option(boolIgnoreCTCPFinger)%0a}%0aobjects.connect%20%25checkboxfinger%20clicked%20%25checkboxfinger%20checkbox%0a%0a%25checkboxversion%20=%20$new(checkbox,%25vbox)%0a%25checkboxversion->$setText($tr("Enable%20ignore%20for%20CTCP%20VERSION"))%0a%25checkboxversion->$setToolTip($tr("When%20checked,%20all%20CTCP%20VERSION%20requests%20are%20ignored."))%0a%25checkboxversion->$setchecked(%25ProtectVersion)%0a%0a#%20Here%20comes%20the%20magic%0aprivateimpl(%25checkboxversion,checkbox)%0a{%0a%09if(%25ProtectVersion)%0a%09{%0a%09%09option%20boolIgnoreCTCPVersion%200%0a%09%09echo%20-i%20=%20$msgtype(GenericStatus)%20$tr("Disabled%20ignore%20for%20CTCP%20VERSION")%0a%09}%0a%09else%0a%09{%0a%09%09option%20boolIgnoreCTCPVersion%201%0a%09%09echo%20-i%20=%20$msgtype(GenericStatus)%20$tr("Enabled%20ignore%20for%20CTCP%20VERSION")%0a%09}%0a%09%25ProtectVersion%20=%20$option(boolIgnoreCTCPVersion)%0a}%0aobjects.connect%20%25checkboxversion%20clicked%20%25checkboxversion%20checkbox%0a%0a%25checkboxuserinfo%20=%20$new(checkbox,%25vbox)%0a%25checkboxuserinfo->$setText($tr("Enable%20ignore%20for%20CTCP%20USERINFO"))%0a%25checkboxuserinfo->$setToolTip($tr("When%20checked,%20all%20CTCP%20USERINFO%20requests%20are%20ignored."))%0a%25checkboxuserinfo->$setchecked(%25ProtectUserinfo)%0a%0a#%20Here%20comes%20the%20magic%0aprivateimpl(%25checkboxuserinfo,checkbox)%0a{%0a%09if(%25ProtectUserinfo)%0a%09{%0a%09%09option%20boolIgnoreCTCPUserinfo%200%0a%09%09echo%20-i%20=%20$msgtype(GenericStatus)%20$tr("Disabled%20ignore%20for%20CTCP%20USERINFO")%0a%09}%0a%09else%0a%09{%0a%09%09option%20boolIgnoreCTCPUserinfo%201%0a%09%09echo%20-i%20=%20$msgtype(GenericStatus)%20$tr("Enabled%20ignore%20for%20CTCP%20USERINFO")%0a%09}%0a%09%25ProtectUserinfo%20=%20$option(boolIgnoreCTCPUserinfo)%0a}%0aobjects.connect%20%25checkboxuserinfo%20clicked%20%25checkboxuserinfo%20checkbox%0a%0a%25checkboxclientinfo%20=%20$new(checkbox,%25vbox)%0a%25checkboxclientinfo->$setText($tr("Enable%20ignore%20for%20CTCP%20CLIENTINFO"))%0a%25checkboxclientinfo->$setToolTip($tr("When%20checked,%20all%20CTCP%20CLIENTINFO%20requests%20are%20ignored."))%0a%25checkboxclientinfo->$setchecked(%25ProtectClientInfo)%0a%0a#%20Here%20comes%20the%20magic%0aprivateimpl(%25checkboxclientinfo,checkbox)%0a{%0a%09if(%25ProtectClientInfo)%0a%09{%0a%09%09option%20boolIgnoreCTCPClientinfo%200%0a%09%09echo%20-i%20=%20$msgtype(GenericStatus)%20$tr("Disabled%20ignore%20for%20CTCP%20CLIENTINFO")%0a%09}%0a%09else%0a%09{%0a%09%09option%20boolIgnoreCTCPClientinfo%201%0a%09%09echo%20-i%20=%20$msgtype(GenericStatus)%20$tr("Enabled%20ignore%20for%20CTCP%20CLIENTINFO")%0a%09}%0a%09%25ProtectClientInfo%20=%20$option(boolIgnoreCTCPClientinfo)%0a}%0aobjects.connect%20%25checkboxclientinfo%20clicked%20%25checkboxclientinfo%20checkbox%0a%0a%25checkboxsource%20=%20$new(checkbox,%25vbox)%0a%25checkboxsource->$setText($tr("Enable%20ignore%20for%20CTCP%20SOURCE"))%0a%25checkboxsource->$setToolTip($tr("When%20checked,%20all%20CTCP%20SOURCE%20requests%20are%20ignored."))%0a%25checkboxsource->$setchecked(%25ProtectSource)%0a%0a#%20Here%20comes%20the%20magic%0aprivateimpl(%25checkboxsource,checkbox)%0a{%0a%09if(%25ProtectSource)%0a%09{%0a%09%09option%20boolIgnoreCTCPSource%200%0a%09%09echo%20-i%20=%20$msgtype(GenericStatus)%20$tr("Disabled%20ignore%20for%20CTCP%20SOURCE")%0a%09}%0a%09else%0a%09{%0a%09%09option%20boolIgnoreCTCPSource%201%0a%09%09echo%20-i%20=%20$msgtype(GenericStatus)%20$tr("Enabled%20ignore%20for%20CTCP%20SOURCE")%0a%09}%0a%09%25ProtectSource%20=%20$option(boolIgnoreCTCPSource)%0a}%0aobjects.connect%20%25checkboxsource%20clicked%20%25checkboxsource%20checkbox%0a%0a%25checkboxtime%20=%20$new(checkbox,%25vbox)%0a%25checkboxtime->$setText($tr("Enable%20ignore%20for%20CTCP%20TIME"))%0a%25checkboxtime->$setToolTip($tr("When%20checked,%20all%20CTCP%20TIME%20requests%20are%20ignored."))%0a%25checkboxtime->$setchecked(%25ProtectTime)%0a%0a#%20Here%20comes%20the%20magic%0aprivateimpl(%25checkboxtime,checkbox)%0a{%0a%09if(%25ProtectTime)%0a%09{%0a%09%09option%20boolIgnoreCTCPTime%200%0a%09%09echo%20-i%20=%20$msgtype(GenericStatus)%20$tr("Disabled%20ignore%20for%20CTCP%20TIME")%0a%09}%0a%09else%0a%09{%0a%09%09option%20boolIgnoreCTCPTime%201%0a%09%09echo%20-i%20=%20$msgtype(GenericStatus)%20$tr("Enabled%20ignore%20for%20CTCP%20TIME")%0a%09}%0a%09%25ProtectTime%20=%20$option(boolIgnoreCTCPTime)%0a}%0aobjects.connect%20%25checkboxtime%20clicked%20%25checkboxtime%20checkbox%0a%0a%25checkboxpage%20=%20$new(checkbox,%25vbox)%0a%25checkboxpage->$setText($tr("Enable%20ignore%20for%20CTCP%20PAGE"))%0a%25checkboxpage->$setToolTip($tr("When%20checked,%20all%20CTCP%20PAGE%20requests%20are%20ignored."))%0a%25checkboxpage->$setchecked(%25ProtectPage)%0a%0a#%20Here%20comes%20the%20magic%0aprivateimpl(%25checkboxpage,checkbox)%0a{%0a%09if(%25ProtectPage)%0a%09{%0a%09%09option%20boolIgnoreCTCPPage%200%0a%09%09echo%20-i%20=%20$msgtype(GenericStatus)%20$tr("Disabled%20ignore%20for%20CTCP%20PAGE")%0a%09}%0a%09else%0a%09{%0a%09%09option%20boolIgnoreCTCPPage%201%0a%09%09echo%20-i%20=%20$msgtype(GenericStatus)%20$tr("Enabled%20ignore%20for%20CTCP%20PAGE")%0a%09}%0a%09%25ProtectPage%20=%20$option(boolIgnoreCTCPPage)%0a}%0aobjects.connect%20%25checkboxpage%20clicked%20%25checkboxpage%20checkbox%0a%0a%25checkboxavatar%20=%20$new(checkbox,%25vbox)%0a%25checkboxavatar->$setText($tr("Enable%20ignore%20for%20CTCP%20AVATAR"))%0a%25checkboxavatar->$setToolTip($tr("When%20checked,%20all%20CTCP%20AVATAR%20requests%20are%20ignored."))%0a%25checkboxavatar->$setchecked(%25ProtectAvatar)%0a%0a#%20Here%20comes%20the%20magic%0aprivateimpl(%25checkboxavatar,checkbox)%0a{%0a%09if(%25ProtectAvatar)%0a%09{%0a%09%09option%20boolIgnoreCTCPAvatar%200%0a%09%09echo%20-i%20=%20$msgtype(GenericStatus)%20$tr("Disabled%20ignore%20for%20CTCP%20AVATAR")%0a%09}%0a%09else%0a%09{%0a%09%09option%20boolIgnoreCTCPAvatar%201%0a%09%09echo%20-i%20=%20$msgtype(GenericStatus)%20$tr("Enabled%20ignore%20for%20CTCP%20AVATAR")%0a%09}%0a%09%25ProtectAvatar%20=%20$option(boolIgnoreCTCPAvatar)%0a}%0aobjects.connect%20%25checkboxavatar%20clicked%20%25checkboxavatar%20checkbox%0a%0a%25checkboxdcc%20=%20$new(checkbox,%25vbox)%0a%25checkboxdcc->$setText($tr("Enable%20ignore%20for%20CTCP%20DCC"))%0a%25checkboxdcc->$setToolTip($tr("When%20checked,%20all%20CTCP%20DCC%20requests%20are%20ignored."))%0a%25checkboxdcc->$setchecked(%25ProtectDCC)%0a%0a#%20Here%20comes%20the%20magic%0aprivateimpl(%25checkboxdcc,checkbox)%0a{%0a%09if(%25ProtectDCC)%0a%09{%0a%09%09option%20boolIgnoreCTCPDCC%200%0a%09%09echo%20-i%20=%20$msgtype(GenericStatus)%20$tr("Disabled%20ignore%20for%20CTCP%20DCC")%0a%09}%0a%09else%0a%09{%0a%09%09option%20boolIgnoreCTCPDCC%201%0a%09%09echo%20-i%20=%20$msgtype(GenericStatus)%20$tr("Enabled%20ignore%20for%20CTCP%20DCC")%0a%09}%0a%09%25ProtectDCC%20=%20$option(boolIgnoreCTCPDCC)%0a}%0aobjects.connect%20%25checkboxdcc%20clicked%20%25checkboxdcc%20checkbox%0a%0a#%20Then%20the%20groupbox%0a%25groupbox%20=%20$new(groupbox,%25widget)%0a%25groupbox->$setTitle($tr("Message%20Suppression%20Controllers"))%0a%25groupbox->$setAlignment("left")%0a%0a#%20Add%20the%20groupbox%20to%20the%20main%20layout%0a%25layout->$addWidget(%25groupbox,1,0)%0a%0a#%20Now%20we%20create%20checkboxes%20+%20labels%0a%25vbox%20=%20$new(vbox,%25groupbox)%0a%0a%25checkboxjoin%20=%20$new(checkbox,%25vbox)%0a%25checkboxjoin->$setText($tr("Enable%20join%20message%20suppression"))%0a%25checkboxjoin->$setToolTip($tr("When%20checked,%20all%20join%20messages%20are%20hidden."))%0a%25checkboxjoin->$setchecked(%25IsJoinEnabled)%0a%0a#%20Here%20comes%20the%20magic%0aprivateimpl(%25checkboxjoin,checkbox)%0a{%0a%09if($isEventEnabled(OnJoin,%20suppressJoinMsgs))%0a%09{%0a%09%09eventctl%20-d%20OnJoin%20suppressJoinMsgs%0a%09%09echo%20-i%20=%20$msgtype(GenericStatus)%20$tr("Disabled%20join%20message%20suppression")%0a%09}%0a%09else%0a%09{%0a%09%09eventctl%20-e%20OnJoin%20suppressJoinMsgs%0a%09%09echo%20-i%20=%20$msgtype(GenericStatus)%20$tr("Enabled%20join%20message%20suppression")%0a%09}%0a%09%25IsJoinEnabled%20=%20$isEventEnabled(OnJoin,%20suppressJoinMsgs)%0a}%0aobjects.connect%20%25checkboxjoin%20clicked%20%25checkboxjoin%20checkbox%0a%0a#%20Here%20comes%20the%20magic%0a%25checkboxpart%20=%20$new(checkbox,%25vbox)%0a%25checkboxpart->$setText($tr("Enable%20part%20message%20suppression"))%0a%25checkboxpart->$setToolTip($tr("When%20checked,%20all%20part%20messages%20are%20hidden."))%0a%25checkboxpart->$setchecked(%25IsPartEnabled)%0a%0aprivateimpl(%25checkboxpart,checkbox)%0a{%0a%09if($isEventEnabled(OnPart,%20suppressPartMsgs))%0a%09{%0a%09%09eventctl%20-d%20OnPart%20suppressPartMsgs%0a%09%09echo%20-i%20=%20$msgtype(GenericStatus)%20$tr("Disabled%20part%20message%20suppression")%0a%09}%0a%09else%0a%09{%0a%09%09eventctl%20-e%20OnPart%20suppressPartMsgs%0a%09%09echo%20-i%20=%20$msgtype(GenericStatus)%20$tr("Enabled%20part%20message%20suppression")%0a%09}%0a%09%25IsPartEnabled%20=%20$isEventEnabled(OnPart,%20suppressPartMsgs)%0a}%0aobjects.connect%20%25checkboxpart%20clicked%20%25checkboxpart%20checkbox%0a%0a%25checkboxquit%20=%20$new(checkbox,%25vbox)%0a%25checkboxquit->$setText($tr("Enable%20quit%20message%20suppression"))%0a%25checkboxquit->$setToolTip($tr("When%20checked,%20all%20part%20messages%20are%20hidden."))%0a%25checkboxquit->$setchecked(%25IsQuitEnabled)%0a%0a#%20Here%20comes%20the%20magic%0aprivateimpl(%25checkboxquit,checkbox)%0a{%0a%09if($isEventEnabled(OnQuit,%20suppressQuitMsgs))%0a%09{%0a%09%09eventctl%20-d%20OnQuit%20suppressQuitMsgs%0a%09%09echo%20-i%20=%20$msgtype(GenericStatus)%20$tr("Disabled%20quit%20message%20suppression")%0a%09}%0a%09else%0a%09{%0a%09%09eventctl%20-e%20OnQuit%20suppressQuitMsgs%0a%09%09echo%20-i%20=%20$msgtype(GenericStatus)%20$tr("Enabled%20quit%20message%20suppression")%0a%09}%0a%09%25IsQuitEnabled%20=%20$isEventEnabled(OnQuit,%20suppressQuitMsgs)%0a}%0aobjects.connect%20%25checkboxquit%20clicked%20%25checkboxquit%20checkbox%0a%0a#%20Now%20add%20the%20Close%20button%0a%25grouphbox%20=%20$new(groupbox,%25widget)%0a%25hrzbox%20=%20$new(hbox,%25grouphbox)%0a%25layout->$addWidget(%25grouphbox,2,0)%0a%0a%25closebutton%20=%20$new(button,%25hrzbox)%0a%25closebutton->$settext($tr("Close"))%0a%0a%25grouphbox->$isFlat($true)%0a%25grouphbox->$setInsideMargin(0)%0a%25grouphbox->$setAlignment(right)%0a%0a#%20Here%20comes%20the%20magic%0aprivateimpl(%25widget,closeEvent)%0a{%0a%09##%20And%20kill%20dialog%20on%20close%0a%09delete%20-q%20$$%0a%0a%09#%20Unset%20all%20the%20variables:%20after%20delete%20so%20%25Pdisplay%20is%20definitely%20unset%20%0a%09unset%20%25PDisplay,%20%25ProtectPing,%20%25ProtectFinger,%20%25ProtectVersion,%20%25ProtectUserinfo%20\%0a%09%25ProtectClientinfo,%20%25ProtectSource,%20%25ProtectTime,%20%25ProtectPage,%20%25ProtectAvatar%20%20%20\%0a%09%25ProtectDCC,%20%25IsJoinEnabled,%20%25IsPartEnabled,%20%25IsQuitEnabled%0a}%0aobjects.connect%20%25closebutton%20clicked%20%25widget%20closeEvent%0a%0a#%20Let's%20show%20this%20sexy%20dialog%0a%25widget->$show()%0a%0a%25widget->$setFixedSize(%25widget->$width(),%20%25widget->$height())
SmallIcon=20
VisibleName=$tr("Global%20Option%20Controllers")
Category=tools
Description=$tr("Opens%20a%20global%20control%20dialog%20for%20easy%20CTCP%20ignore%20and%20joins/parts/quits%20management.")
Flags=60
